"use strict";(self.webpackChunklev_time_tracking_frontend=self.webpackChunklev_time_tracking_frontend||[]).push([[322],{3606:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(1523),i=n(835),s="style_home__aRllz",l="style_trackingContainer__6zKnl",o="style_todayTotal__5iFlB",r=n(2791),d=n(2),c=function(e){var t=Math.floor(e/60),n=e%60,a="".concat(0===t&&n||!t&&!n?"":t).concat(t&&n?".":"").concat(0===n&&t?"":n);return n&&!t?a+="m":t&&(a+="h"),a},u=function(e){var t=Math.floor(e/60),n=e%60;return"".concat(t,".").concat(n)},_=function(e){var t=Math.floor(e/60),n="";return e%60&&!t?n+="m":t&&(n+="h"),n},m=n(306),h="style_card__cydnF",f="style_cardContent__pzVKw",v="style_link__o3ZAy",y="style_title__iW8z9",C="style_value__yEIw0",g="style_icon__bRlSd",j="style_pluseBtn__RrbqC",x="style_detailsBtn__tkfiS",p="style_detailText__uNK59",Z="style_eyeIcon__Dpp91",k="style_footer__sUCsF",N=n(184);function T(e){var t=e.time,n=e.title,i=e.id,s=e.handlePlus,l=e.onClickCard;return(0,N.jsx)("div",{className:h,onClick:l,children:(0,N.jsxs)("div",{className:f,children:[(0,N.jsx)("div",{className:y,children:n}),(0,N.jsx)("div",{className:C,children:c(t)}),(0,N.jsxs)("div",{className:k,children:[(0,N.jsx)(m.Z,{styles:j,variant:"secondary",onClick:function(e){e.stopPropagation(),s()},children:(0,N.jsx)(d.pO,{className:g})}),(0,N.jsx)(a.rU,{to:"/time/".concat(i),className:v,onClick:function(e){return e.stopPropagation()},children:(0,N.jsxs)(m.Z,{styles:x,children:[(0,N.jsx)("div",{className:p,children:"View Details"}),(0,N.jsx)(d.tE,{className:Z})]})})]})]})})}var L=n(2602),b=n(885),S=n(1933),D=n(1413),M=n(6050),w=n(1688);var A=function(){var e=(0,r.useState)([]),t=(0,b.Z)(e,2),n=t[0],a=t[1],i=function(e){var t=(0,S.useQuery)(M.a.timeList,w.C.getTimeList,(0,D.Z)({},e));return{isLoading:t.isLoading,data:t.data}}(),s=i.data,l=i.isLoading,o=function(e){a(n.map((function(t){return t._id===e._id?e:t})))},d=(0,S.useMutation)(w.C.addTime,{onSuccess:function(e){var t=e.data;o(t)}}),c=d.mutate,m=d.isLoading;(0,r.useEffect)((function(){null!==s&&void 0!==s&&s.data&&a(s.data)}),[null===s||void 0===s?void 0:s.data]);var h=n.reduce((function(e,t){return e+t.time}),0);return{isLoading:l||m,list:n,total:u(h),totalLabel:_(h),handleAddTime:function(e,t){c({_id:e,time:t})},updateList:o}},P=(n(1694),n(9513)),z=n.n(P),B="style_input__cpsPR",I=(n(8639),n(3442));function R(e){var t=e.onChange,n=(0,r.useState)(new Date),a=(0,b.Z)(n,2),i=a[0],s=a[1];return(0,N.jsx)(z(),{selected:i,onChange:function(e){t&&t(e),s(e)},customInput:(0,N.jsx)(I.Z,{containerStyles:B,label:"Date:"})})}var E=n(720),F={addTimeModal:"styles_addTimeModal__lNeZV",title:"styles_title__A3czD",btn:"styles_btn__jeasd",timeBtn:"styles_timeBtn__iInCD"},K=n(9557);function U(e){var t=e.open,n=e.onClose,a=function(e,t){var n=(0,r.useState)(!1),a=(0,b.Z)(n,2),i=a[0],s=a[1],l=(0,r.useState)(0),o=(0,b.Z)(l,2),d=o[0],c=o[1],u=(0,K.d)().data,_=(0,S.useMutation)(w.C.addTime,{onSuccess:function(n){var a=n.data;e(a),t()}}).mutate;return{handleChange:function(e){c(e.target.value)},handleChangeTime:function(){_({_id:u,time:d,date:i})},handleChangeDate:function(e){s(e)}}}(e.updateList,n),i=a.handleChange,s=a.handleChangeTime,l=a.handleChangeDate;return(0,N.jsx)(E.A,{open:t,onClose:n,children:(0,N.jsxs)("div",{className:F.addTimeModal,children:[(0,N.jsx)("div",{className:F.header,children:(0,N.jsx)("div",{className:F.title,children:"Add time"})}),(0,N.jsx)(I.Z,{type:"number",onChange:i,label:"Time:"}),(0,N.jsx)(R,{onChange:l}),(0,N.jsx)(m.Z,{styles:F.btn,onClick:s,children:"Save"})]})})}var V=n(3792);var O=function(){var e=A(),t=e.list,n=e.total,r=e.isLoading,d=e.totalLabel,c=e.handleAddTime,u=e.updateList,_=(0,K.d)(),m=_.open,h=_.onOpen,f=_.onClose;return(0,N.jsxs)("div",{className:s,children:[(0,N.jsx)(V.Z,{isLoading:r}),(0,N.jsx)(a.rU,{to:"time/total",children:(0,N.jsxs)("div",{className:o,children:[(0,N.jsx)(i.ZP,{end:n,duration:1,decimals:2}),d]})}),(0,N.jsx)("div",{className:l,children:t.map((function(e){var t=e.time,n=e.name,a=e._id;return(0,N.jsx)(T,{time:t,title:n,id:a,onClickCard:function(){return c(a,30)},handlePlus:function(){return h(L.ZD,a)}},a)}))}),(0,N.jsx)(U,{onClose:f,open:m,updateList:u})]})}},1688:function(e,t,n){n.d(t,{C:function(){return l}});var a=n(5671),i=n(3144),s=n(8684),l=new(function(){function e(){(0,a.Z)(this,e)}return(0,i.Z)(e,[{key:"addTime",value:function(e){var t=e._id,n=e.time,a=e.date;return s.Z.post("time/add-time",{_id:t,time:n,date:a}).then((function(e){return e}))}},{key:"getTimeList",value:function(){return s.Z.get("time/time-list").then((function(e){return e}))}},{key:"getTime",value:function(e){return s.Z.get("time/".concat(e)).then((function(e){return e}))}},{key:"getTotal",value:function(){return s.Z.get("time/total").then((function(e){return e}))}}]),e}())}}]);
//# sourceMappingURL=322.1c0dd5d1.chunk.js.map