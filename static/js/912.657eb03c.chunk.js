"use strict";(self.webpackChunklev_time_tracking_frontend=self.webpackChunklev_time_tracking_frontend||[]).push([[912],{1783:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(885),a=n(2791),i=n(4139),d="style_input__-k4DQ",s="style_checkbox__fYBDY",r="style_label__aXwop",l=n(184);var c=function(e){var t=e.title,n=e.checked,c=e.onChange,u=(0,a.useState)(n||!1),f=(0,o.Z)(u,2),_=f[0],h=f[1],p=(0,i.useSpringRef)(),v=(0,i.useSpring)({backgroundColor:_?"#61dafb":"#fff",borderColor:_?"#61dafb":"#fff",config:i.config.gentle,ref:p}),m=(0,a.useState)(null),g=(0,o.Z)(m,2),x=g[0],C=g[1],y=(0,i.useSpringRef)(),T=(0,i.useSpring)({x:_?0:x,config:i.config.gentle,ref:y});return(0,i.useChain)(_?[p,y]:[y,p],[0,.1]),(0,l.jsxs)("label",{className:r,children:[(0,l.jsx)("input",{className:d,type:"checkbox",onChange:function(){c&&c(!_),h(!_)}}),(0,l.jsx)(i.animated.svg,{style:v,className:"".concat(s," ").concat(_?"checkbox--active":""),"aria-hidden":"true",viewBox:"0 0 15 11",fill:"none",children:(0,l.jsx)(i.animated.path,{d:"M1 4.5L5 9L14 1",strokeWidth:"2",stroke:"#fff",ref:function(e){e&&C(e.getTotalLength())},strokeDasharray:x,strokeDashoffset:T.x})}),t]})}},6626:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var o=n(4942),a=n(1694),i=n.n(a),d={wrapper:"style_wrapper__4WtR1",container:"style_container__wIHx3",createContainer:"style_createContainer__oqx1o",todo:"style_todo__ELHi3",subTodo:"style_subTodo__dbKly",open:"style_open__56SU9",arrow:"style_arrow__oPune",icon:"style_icon__G7kqM"},s=n(1413),r=n(2982),l=n(885),c=n(2791),u=n(1933),f=n(6050),_=n(5671),h=n(3144),p=n(8684),v=new(function(){function e(){(0,_.Z)(this,e)}return(0,h.Z)(e,[{key:"getTodoList",value:function(){return p.Z.get("todo").then((function(e){return e}))}},{key:"updateTodo",value:function(e){var t=e.title,n=e.todos,o=e.completed,a=e._id;return p.Z.post("todo/update",{title:t,todos:n,completed:o,_id:a}).then((function(e){return e}))}},{key:"createTodo",value:function(e){var t=e.title,n=e.todos;return p.Z.post("todo/create",{title:t,todos:n}).then((function(e){return e}))}},{key:"deleteTodo",value:function(e){return p.Z.delete("todo/".concat(e)).then((function(e){return e}))}}]),e}());var m=function(e){var t=(0,c.useState)(null),n=(0,l.Z)(t,2),o=n[0],a=n[1],i=(0,c.useState)([]),d=(0,l.Z)(i,2),_=d[0],h=d[1],p=function(e){var t=(0,u.useQuery)(f.a.todoList,v.getTodoList,(0,s.Z)({},e));return{isLoading:t.isLoading,data:t.data}}(),m=p.data,g=p.isLoading,x=(0,u.useMutation)(v.createTodo,{onSuccess:function(e){h([e.data].concat((0,r.Z)(_)))}}),C=x.mutate,y=x.isLoading,T=(0,u.useMutation)(v.updateTodo),b=T.mutate,j=T.isLoading,Z=(0,u.useMutation)(v.deleteTodo),k=Z.mutate,S=Z.isLoading;return(0,c.useEffect)((function(){null!==m&&void 0!==m&&m.data&&h(m.data)}),[null===m||void 0===m?void 0:m.data]),{isLoading:g||j||y||S,list:_,open:o,toggleOpen:function(e){a(e===o?null:e)},handleEditSubTodo:function(e){var t=e.i,n=e.completed,o=e._id,a=_.find((function(e){return e._id===o})),i=a.todos,d=(0,r.Z)(i);d[t]=(0,s.Z)((0,s.Z)({},d[t]),{},{completed:n}),b({_id:o,todos:d})},handleDelete:function(t){t&&(k(t),h(_.filter((function(e){return e._id!==t})))),e()},handleEdit:function(e){var t=e._id,n=(e.title,e.todos,e.completed);b({_id:t,completed:n}),h(_.map((function(e){return e._id===t?(0,s.Z)((0,s.Z)({},e),{},{completed:n}):e})))},handleCreate:function(e){var t=e.title,n=e.todos;C({title:t,todos:n})}}},g=n(3792),x=n(1783),C=n(306),y=n(9557),T=n(2602),b=n(3442),j=n(720),Z={addTimeModal:"styles_addTimeModal__OPTcB",title:"styles_title__c7TJF",btn:"styles_btn__ufnUc",timeBtn:"styles_timeBtn__xdfSV",subTodoBtn:"styles_subTodoBtn__0wNaC",subTodoContainer:"styles_subTodoContainer__dRouV",todo:"styles_todo__7XdIq"},k=n(184);function S(e){var t=e.open,n=e.onClose,o=function(e,t){var n=(0,c.useState)(""),o=(0,l.Z)(n,2),a=o[0],i=o[1],d=(0,c.useState)([]),s=(0,l.Z)(d,2),u=s[0],f=s[1];return{handleChange:function(e){i(e.target.value)},onSave:function(){e({title:a,todos:u.filter((function(e){return!!e})).map((function(e){return{title:e,completed:!1}}))}),i(""),f([]),t()},handleAddSubTodo:function(){f([].concat((0,r.Z)(u),[""]))},handleChangeSubTodo:function(e,t){var n=(0,r.Z)(u);n[t]=e,f(n)},todos:u}}(e.handleCreate,n),a=o.handleChange,i=o.onSave,d=o.handleAddSubTodo,s=o.handleChangeSubTodo,u=o.todos;return(0,k.jsx)(j.A,{open:t===T.UB,onClose:n,children:(0,k.jsxs)("div",{className:Z.addTimeModal,children:[(0,k.jsx)("div",{className:Z.header,children:(0,k.jsx)("div",{className:Z.title,children:"Create Todo"})}),(0,k.jsx)(b.Z,{placeholder:"Todo title",onChange:a}),(0,k.jsx)(C.Z,{variant:"secondary",onClick:d,styles:Z.subTodoBtn,children:"Add sub todo"}),(0,k.jsx)("div",{className:Z.subTodoContainer,children:u.map((function(e,t){return(0,k.jsx)("div",{className:Z.todo,children:(0,k.jsx)(b.Z,{onChange:function(e){return s(e.target.value,t)}})})}))}),(0,k.jsx)(C.Z,{styles:Z.btn,onClick:i,children:"Save"})]})})}var N=n(2),L={addTimeModal:"styles_addTimeModal__5XIDZ",title:"styles_title__S60cN",btn:"styles_btn__bSC-3",footer:"styles_footer__McdcV"};function w(e){var t=e.open,n=e.onClose,o=e.id;return(0,k.jsx)(j.A,{open:t===T.TH,onClose:n,children:(0,k.jsxs)("div",{className:L.addTimeModal,children:[(0,k.jsx)("div",{className:L.header,children:(0,k.jsx)("div",{className:L.title,children:"A you sure you want to delete this prettie item?"})}),(0,k.jsxs)("div",{className:L.footer,children:[(0,k.jsx)(C.Z,{styles:L.btn,onClick:function(){return n(o)},variant:"danger",children:"yes"}),(0,k.jsx)(C.Z,{styles:L.btn,variant:"secondary",onClick:function(){return n()},children:"no, I missclicked)"})]})]})})}var M=function(){var e=(0,y.d)(),t=e.onOpen,n=e.open,a=e.onClose,s=e.data,r=m(a),l=r.list,c=r.isLoading,u=r.open,f=r.handleEdit,_=r.handleCreate,h=r.handleDelete,p=r.handleEditSubTodo,v=r.toggleOpen;return(0,k.jsxs)("div",{className:d.wrapper,children:[(0,k.jsx)(g.Z,{isLoading:c}),(0,k.jsx)("div",{className:d.createContainer,children:(0,k.jsx)(C.Z,{onClick:function(){return t(T.UB)},children:"Craete"})}),(0,k.jsx)("div",{className:d.container,children:l.map((function(e,n){var a=e.completed,s=e.title,r=e.todos,l=e._id;return(0,k.jsxs)("div",{className:d.todoContainer,children:[(0,k.jsxs)("div",{className:d.todo,children:[!!r.length&&(0,k.jsx)(N.ve,{className:i()(d.arrow,(0,o.Z)({},d.open,u===l)),onClick:function(){return v(l)}}),(0,k.jsx)(x.Z,{checked:a,title:s,onChange:function(e){return f({_id:l,completed:e})}}),(0,k.jsx)(N.pJ,{className:d.icon,onClick:function(){return t(T.TH,l)}})]}),(0,k.jsx)("div",{className:i()(d.subTodo,(0,o.Z)({},d.open,u===l)),children:r.map((function(e,t){return(0,k.jsx)(x.Z,{checked:e.completed,title:e.title,onChange:function(e){return p({i:t,completed:e,_id:l})}},t)}))})]},l)}))}),n===T.UB&&(0,k.jsx)(S,{open:n,onClose:a,handleCreate:_}),n===T.TH&&(0,k.jsx)(w,{open:n,onClose:h,id:s})]})}}}]);
//# sourceMappingURL=912.657eb03c.chunk.js.map